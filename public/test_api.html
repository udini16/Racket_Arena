<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Racket Arena API Tester</title>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; background: #f0f2f5; }
        .container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .box { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        h2 { margin-top: 0; font-size: 1.2rem; color: #1f2937; }
        input { display: block; width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; cursor: pointer; border-radius: 6px; border: none; font-weight: bold; color: white; transition: opacity 0.2s; }
        .btn-green { background: #10b981; }
        .btn-blue { background: #3b82f6; }
        button:hover { opacity: 0.9; }
        pre { background: #1f2937; color: #a5f3fc; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.9rem; min-height: 100px; }
        .label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em; color: #6b7280; margin-bottom: 5px; display: block; }
    </style>
</head>
<body>
    <h1 style="text-align:center; color:#374151;">üè∏ Racket Arena API Tester</h1>
    
    <div class="container">
        <!-- Register Box -->
        <div class="box">
            <h2>üìù Register</h2>
            <input type="text" id="reg_name" placeholder="Name">
            <input type="email" id="reg_email" placeholder="Email">
            <input type="password" id="reg_password" placeholder="Password">
            <input type="password" id="reg_password_confirmation" placeholder="Confirm Password">
            <button class="btn-green" onclick="send('register')">Register New User</button>
        </div>

        <!-- Login Box -->
        <div class="box">
            <h2>üîê Login</h2>
            <input type="email" id="login_email" placeholder="Email (e.g. izzuddin0@gmail.com)">
            <input type="password" id="login_password" placeholder="Password">
            <button class="btn-blue" onclick="send('login')">Login to Get Token</button>
        </div>
    </div>

    <div style="margin-top: 20px;">
        <span class="label">Server Response:</span>
        <pre id="output">Waiting for action...</pre>
    </div>

    <script>
        async function send(type) {
            const output = document.getElementById('output');
            output.innerText = "Sending request...";
            
            let url = '/api/' + type;
            let data = {};

            if (type === 'register') {
                data = {
                    name: document.getElementById('reg_name').value,
                    email: document.getElementById('reg_email').value,
                    password: document.getElementById('reg_password').value,
                    password_confirmation: document.getElementById('reg_password_confirmation').value
                };
            } else {
                data = {
                    email: document.getElementById('login_email').value,
                    password: document.getElementById('login_password').value
                };
            }

            try {
                const res = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                    body: JSON.stringify(data)
                });
                const json = await res.json();
                output.innerText = JSON.stringify(json, null, 2);
            } catch (err) {
                output.innerText = "Error: " + err.message;
            }
        }
    </script>
</body>
</html>